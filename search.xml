<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Emiyaのdiary</title>
    <url>/2022/05/02/Emiya%E3%81%AEdiary/</url>
    <content><![CDATA[<span id="more"></span>

<h3 id="20220502"><a href="#20220502" class="headerlink" title="20220502"></a>20220502</h3><ol>
<li>学习利用Hexo和github搭建博客，目前博客基本搭建完成</li>
</ol>
]]></content>
      <categories>
        <category>学习日记</category>
      </categories>
  </entry>
  <entry>
    <title>个人博客搭建记录[2]</title>
    <url>/2022/05/02/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95-2/</url>
    <content><![CDATA[<span id="more"></span>

<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">OS Platform: macOS</span><br><span class="line">OS Version: 10.15</span><br></pre></td></tr></table></figure>

<h3 id="个性化配置"><a href="#个性化配置" class="headerlink" title="个性化配置"></a>个性化配置</h3><p><strong>更换主题</strong><br>主题是博客页面的展示方式，不喜欢当前主题可以进行更换</p>
<p>hexo 主题页面：<a href="https://hexo.io/themes/">https://hexo.io/themes/</a><br>本文采用 <a href="https://github.com/theme-next/hexo-theme-next">Next</a> 主题</p>
<p>下载 thems 到博客文件夹</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>

<p>修改站点的配置文件</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line"><span class="comment">## Plugins: https://hexo.io/plugins/</span></span><br><span class="line"><span class="comment">## Themes: https://hexo.io/themes/</span></span><br><span class="line"><span class="attr">theme:</span> <span class="string">next</span></span><br></pre></td></tr></table></figure>
<p>打开主题的配置文件进行 Scheme Settings</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Scheme Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Schemes</span></span><br><span class="line"><span class="comment"># scheme: Muse</span></span><br><span class="line"><span class="comment"># scheme: Mist</span></span><br><span class="line"><span class="comment"># scheme: Pisces</span></span><br><span class="line"><span class="attr">scheme:</span> <span class="string">Gemini</span></span><br></pre></td></tr></table></figure>
<p>重新编译并部署即可</p>
<p><strong>修改目录</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># Menu Settings</span></span><br><span class="line"><span class="comment"># ---------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br></pre></td></tr></table></figure>

<p><strong>更换头像</strong><br>选择自己喜欢的图片加进去即可</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.jpeg</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>添加社交网络</strong></p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line">  <span class="attr">GitHub:</span> <span class="string">https://github.com/darenfy</span> <span class="string">||</span> <span class="string">fab</span> <span class="string">fa-github</span></span><br><span class="line">  <span class="attr">E-Mail:</span> <span class="string">mailto:darenfy@gmail.com</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-envelope</span></span><br></pre></td></tr></table></figure>
<p><strong>增加阅读全文功能</strong></p>
<p><strong>开启文章目录</strong></p>
<h3 id="Hexo-使用"><a href="#Hexo-使用" class="headerlink" title="Hexo 使用"></a>Hexo 使用</h3><h4 id="如何写文章"><a href="#如何写文章" class="headerlink" title="如何写文章"></a>如何写文章</h4><p>命令行输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo n <span class="string">&#x27;blog name&#x27;</span></span><br></pre></td></tr></table></figure>
<p>就能看到在 <code>source</code> 文件夹下新建了 <code>blog name.md</code> 文件，</p>
<h4 id="搭建图床"><a href="#搭建图床" class="headerlink" title="搭建图床"></a>搭建图床</h4><p>使用 picGo 在 github 上构建免费图床，具体设置请参考 <a href="https://picgo.github.io/PicGo-Doc/zh/guide/">https://picgo.github.io/PicGo-Doc/zh/guide/</a></p>
<h3 id="Hexo-备份"><a href="#Hexo-备份" class="headerlink" title="Hexo 备份"></a>Hexo 备份</h3><p><a href="http://www.xiaoliblog.cn/page/hexobackup.html#%E5%AE%89%E8%A3%85%E6%8F%92%E4%BB%B6">hexo-git-backup 博客备份及恢复</a><br><a href="https://github.com/coneycode/hexo-git-backup">git-backup</a></p>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ol>
<li>在进行个性化配置的过程中，如果想要实时查看配置效果，直接采用本地 <code>hexo s</code></li>
</ol>
<h4 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h4><p><a href="https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da">https://www.mdnice.com/writing/382af676baff4ed4ad5511074fb736da</a></p>
<p><a href="https://blog.51cto.com/u_12877374/2853898">Hexo博客NexT主题开启文章目录和调整样式</a></p>
<p><a href="http://theme-next.iissnan.com/theme-settings.html">主题配置</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/460818216">hexo博客新增RSS功能支持</a></p>
<p><a href="https://tding.top/archives/42c38b10.html">Hexo-NexT (v7.0+) 主题配置</a></p>
]]></content>
      <categories>
        <category>小技巧</category>
      </categories>
      <tags>
        <tag>blog搭建</tag>
      </tags>
  </entry>
  <entry>
    <title>个人博客搭建记录[1]</title>
    <url>/2022/05/02/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E8%AE%B0%E5%BD%95-1/</url>
    <content><![CDATA[<span id="more"></span>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">OS Type: macOS</span><br><span class="line">OS Version: 10.15</span><br><span class="line">git 2.30.0</span><br><span class="line">node v16.11.0</span><br><span class="line">npm 8.0.0</span><br></pre></td></tr></table></figure>

<h3 id="安装环境"><a href="#安装环境" class="headerlink" title="安装环境"></a>安装环境</h3><p><strong>安装 hexo</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br><span class="line"></span><br><span class="line">$ hexo --version</span><br><span class="line">hexo-cli: 4.3.0</span><br><span class="line">os: darwin 19.6.0 10.15.7</span><br><span class="line"></span><br><span class="line">node: 16.11.0</span><br><span class="line">v8: 9.4.146.19-node.13</span><br><span class="line">uv: 1.42.0</span><br><span class="line">zlib: 1.2.11</span><br><span class="line">brotli: 1.0.9</span><br><span class="line">ares: 1.17.2</span><br><span class="line">modules: 93</span><br><span class="line">nghttp2: 1.45.1</span><br><span class="line">napi: 8</span><br><span class="line">llhttp: 6.0.2</span><br><span class="line">openssl: 1.1.1l</span><br><span class="line">cldr: 39.0</span><br><span class="line">icu: 69.1</span><br><span class="line">tz: 2021a</span><br><span class="line">unicode: 13.0</span><br></pre></td></tr></table></figure>

<p><strong>初始化 hexo</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt; </span><br><span class="line">INFO  Cloning hexo-starter https://github.com/hexojs/hexo-starter.git</span><br><span class="line">INFO  Install dependencies</span><br><span class="line">INFO  Start blogging with Hexo!</span><br><span class="line"></span><br><span class="line">$ <span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">$ npm install</span><br><span class="line">$ tree -L 1</span><br><span class="line">.</span><br><span class="line">├── _config.landscape.yml </span><br><span class="line">├── _config.yml <span class="comment"># 网站的配置信息</span></span><br><span class="line">├── node_modules</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── package.json <span class="comment"># 应用程序的信息</span></span><br><span class="line">├── scaffolds <span class="comment"># 模版文件夹 - 新建文章文件中默认添加的内容</span></span><br><span class="line">├── <span class="built_in">source</span> <span class="comment"># 存放用户资源的地方</span></span><br><span class="line">└── themes <span class="comment"># 主题文件夹 - 用来生成静态页面</span></span><br></pre></td></tr></table></figure>

<p><strong>配置远程仓库</strong><br>创建 git 仓库，仓库名为 <name>.github.io</p>
<p>在本地设置 git 配置，并将 ssh 公钥配置到 github</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">&#x27;&lt;gitname&gt;&#x27;</span></span><br><span class="line">$ git config --global user.email <span class="string">&#x27;&lt;gitemail&gt;&#x27;</span></span><br><span class="line">$ ssh-keygen -t rsa -C <span class="string">&quot;&lt;gitemail&gt;&quot;</span></span><br></pre></td></tr></table></figure>
<p>查看 ssh 是否设置成功</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ ssh git@github.com</span><br><span class="line">PTY allocation request failed on channel 0</span><br><span class="line">Hi Yourname! You<span class="string">&#x27;ve successfully authenticated, but GitHub does not provide shell access.</span></span><br><span class="line"><span class="string">Connection to github.com closed.</span></span><br></pre></td></tr></table></figure>

<p><strong>网站信息配置</strong><br>通过 <code>_config.yml</code> 修改配置</p>
<p>此处主要设置 <code>deploy</code>：即给 <code>hexo d</code> 进行配置告知 <code>hexo</code> 将 blog 部署在哪里</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line">  <span class="attr">repository:</span>  <span class="string">https://github.com/Yourname/Yourname.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure>
<p>安装部署插件，并部署</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install hexo-deployer-git --save</span><br><span class="line"></span><br><span class="line">$ hexo clean <span class="comment"># 清除缓存</span></span><br><span class="line">$ hexo g <span class="comment"># 生成静态文件</span></span><br><span class="line">$ hexo d <span class="comment"># 部署网站</span></span><br><span class="line">....</span><br><span class="line">To https://github.com/Yourname/Yourname.github.io.git</span><br><span class="line"> * [new branch]      HEAD -&gt; master</span><br><span class="line">分支 <span class="string">&#x27;master&#x27;</span> 设置为跟踪来自 <span class="string">&#x27;https://github.com/Yourname/Yourname.github.io.git&#x27;</span> 的远程分支 <span class="string">&#x27;master&#x27;</span>。</span><br><span class="line">INFO  Deploy <span class="keyword">done</span>: git</span><br></pre></td></tr></table></figure>

<p><strong>绑定域名</strong><br>绑定域名需要三步</p>
<ol>
<li><p>在域名服务商修改解析记录集<br>我使用的华为云，设置 A 和 CNAME 记录如下图<br><img src="https://cdn.jsdelivr.net/gh/darenfy/wiki-resources@master/202205021542680.png"><br>A 记录可以通过站长工具进行查询 <name>.github.io 的 ip 地址<br>注意：不能对同一个域名同时设置 A 记录和 CNAME 记录，会造成冲突</p>
</li>
<li><p>在 github 修改提供服务的域名<br>在 <name>.github.io 仓库中进行设置域名，<code>Settings-&gt;Pages-&gt;Custom domain</code>, 设置为自己的域名</p>
</li>
<li><p>在本地博客添加记录集文件 CNAME</p>
 <figure class="highlight txt"><table><tr><td class="code"><pre><span class="line">emiyada.cn</span><br></pre></td></tr></table></figure></li>
</ol>
<p>重新部署</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean </span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>
<p>从浏览器打开页面可以看到<br><img src="https://cdn.jsdelivr.net/gh/darenfy/wiki-resources@master/202205021540840.png"></p>
<h3 id="报错解决方式"><a href="#报错解决方式" class="headerlink" title="报错解决方式"></a>报错解决方式</h3><ol>
<li><p>无法读取远程仓库</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fatal: <span class="string">&#x27;git@github.com/Yourname/Yourname.github.io.git&#x27;</span> does not appear to be a git repository</span><br><span class="line">fatal: 无法读取远程仓库。</span><br></pre></td></tr></table></figure>
<p>这里可能是由于将 deploy repo 设置成 git@ 连接方式，建议改成 https 连接</p>
</li>
<li><p>鉴权失败</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">remote: Please see https://github.blog/2020-12-15-token-authentication-requirements-for-git-operations/ <span class="keyword">for</span> more information.</span><br><span class="line">fatal: <span class="string">&#x27;https://github.com/Yourname/Yourname.github.io.git/&#x27;</span> 鉴权失败</span><br></pre></td></tr></table></figure>
<p>在部署的时候会提示输入用户名和密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Username for &#x27;https://github.com&#x27;:</span><br><span class="line">Password for &#x27;https://Yourname@github.com&#x27;:</span><br></pre></td></tr></table></figure>
<p>这里如果输入正常的github密码会报错鉴权失败，因为在2020年之后github修改成 token 认证机制</p>
</li>
</ol>
<p>token 可以通过 github 的 <code>Settings-&gt;Developer settings-&gt;Personal access tokens</code> 生成，并将其作为密码</p>
]]></content>
      <categories>
        <category>小技巧</category>
      </categories>
      <tags>
        <tag>blog搭建</tag>
      </tags>
  </entry>
</search>
